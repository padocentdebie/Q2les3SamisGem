<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Proces-Verbaal Oefening - Dossier Samir</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

    <style>
        :root {
            --primary-blue: #1d4e89;
            --accent-gold: #f9d423;
            --border-gray: #cbd5e0;
            --bg-light: #f4f7f9;
            --text-main: #2d3748;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-main);
            margin: 0;
            padding: 40px 20px;
        }

        .container {
            max-width: 950px;
            margin: auto;
            background: white;
            padding: 40px;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .header {
            color: var(--primary-blue);
            border-bottom: 3px solid var(--accent-gold);
            text-transform: uppercase;
            text-align: center;
            padding-bottom: 15px;
            margin-bottom: 30px;
            letter-spacing: 1px;
        }

        .stap-box {
            border-left: 5px solid var(--primary-blue);
            background: #ffffff;
            border: 1px solid var(--border-gray);
            border-left: 5px solid var(--primary-blue);
            padding: 25px;
            margin-bottom: 25px;
        }

        h3 {
            margin-top: 0;
            color: var(--primary-blue);
            font-size: 1.1em;
        }

        .action-button {
            display: inline-block;
            background: var(--primary-blue);
            color: white !important;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-gray);
            border-radius: 4px;
            box-sizing: border-box;
            font-family: inherit;
            margin-bottom: 10px;
        }

        .submit-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            text-transform: uppercase;
        }

        /* Klasoverzicht */
        .aangifte-kaart {
            border: 1px solid var(--border-gray);
            margin-top: 20px;
            padding: 20px;
            border-radius: 4px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            background: #fff;
        }

        @media (min-width: 768px) {
            .aangifte-kaart { grid-template-columns: 1fr 300px; }
        }

        .verbalisant-label {
            font-weight: bold;
            font-size: 0.9em;
            color: var(--primary-blue);
            display: block;
            margin-bottom: 8px;
        }

        .tekst-weergave {
            white-space: pre-wrap;
            background: #f8fafc;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #edf2f7;
            font-size: 0.95em;
        }

        .feedback-kolom {
            background: #fffdf2;
            border: 1px solid #f9d423;
            padding: 15px;
            border-radius: 4px;
            display: none;
        }

        .feedback-btn {
            background: none;
            border: 1px solid var(--primary-blue);
            color: var(--primary-blue);
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 15px;
            font-size: 0.85em;
            font-weight: bold;
        }

        .vinklijst {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .vinklijst li {
            font-size: 0.85em;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
        }

        .vinklijst input { margin-right: 10px; }
    </style>
</head>
<body>

<div class="container">
    <h1 class="header">Dossier: Aangifte van Samir</h1>

    <div class="stap-box">
        <h3>1. Informatieverzameling</h3>
        <p>Start het verhoor met Samir via de onderstaande module om de 7 Gouden W's te inventariseren.</p>
        <center>
            <a href="https://gemini.google.com/gem/e6e35023ee68" target="_blank" class="action-button">Start verhoormodule</a>
        </center>
    </div>

    <div class="stap-box">
        <h3>2. Proces-Verbaal van Aangifte</h3>
        <input type="text" id="student-naam" placeholder="Naam verbalisant">
        <textarea id="input-tekst" placeholder="Schrijf hier de zakelijke weergave van de aangifte (ik-vorm, onvoltooid verleden tijd)..." style="height: 180px;"></textarea>
        <button class="submit-btn" onclick="verstuurData()">Publiceer voor revisie</button>
    </div>

    <h2 style="color: var(--primary-blue); margin-top: 50px; font-size: 1.2em; border-bottom: 1px solid var(--border-gray); padding-bottom: 10px;">Gepubliceerde Aangiftes</h2>
    <div id="live-feed">Bezig met laden van inzendingen...</div>
</div>

<script>
    // Firebase Configuratie
    const firebaseConfig = {
        apiKey: "AIzaSyBj8dXkl1rEfyx54_MDy_tYd2P7kAeU8VQ",
        authDomain: "q2les3samirgem.firebaseapp.com",
        databaseURL: "https://q2les3samirgem-default-rtdb.europe-west1.firebasedatabase.app/",
        projectId: "q2les3samirgem",
        storageBucket: "q2les3samirgem.firebasestorage.app",
        messagingSenderId: "8681998187",
        appId: "1:8681998187:web:fd08067494a010dc572e2e"
    };

    // Initialiseer Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // Data versturen
    function verstuurData() {
        const naam = document.getElementById('student-naam').value;
        const tekst = document.getElementById('input-tekst').value;

        if(!naam || !tekst) return alert("Vul zowel uw naam als de tekst in.");

        database.ref('aangiftes').push({
            naam: naam,
            tekst: tekst,
            timestamp: Date.now()
        });

        document.getElementById('input-tekst').value = '';
    }

    // Live updates ontvangen
    database.ref('aangiftes').on('value', (snapshot) => {
        const feed = document.getElementById('live-feed');
        feed.innerHTML = '';
        const data = snapshot.val();

        if (data) {
            Object.keys(data).reverse().forEach(key => {
                const item = data[key];
                const kaart = document.createElement('div');
                kaart.className = 'aangifte-kaart';
                kaart.innerHTML = `
                    <div>
                        <span class="verbalisant-label">Verbalisant: ${item.naam}</span>
                        <div class="tekst-weergave">${item.tekst}</div>
                        <button class="feedback-btn" onclick="toggleFeedback('${key}')">Beoordelingspaneel</button>
                    </div>
                    <div class="feedback-kolom" id="fb-${key}">
                        <strong style="font-size: 0.8em; display:block; margin-bottom:10px;">CONTROLEPUNTEN</strong>
                        <ul class="vinklijst">
                            <li><input type="checkbox"> Bestanddeeltekst</li>
                            <li><input type="checkbox"> Gouden W's</li>
                            <li><input type="checkbox"> Redenen van wetenschap</li>
                            <li><input type="checkbox"> Ik-vorm</li>
                            <li><input type="checkbox"> Onvoltooid verleden tijd</li>
                            <li><input type="checkbox"> Voor delict</li>
                            <li><input type="checkbox"> Tijdens delict</li>
                            <li><input type="checkbox"> Na delict</li>
                        </ul>
                        <textarea placeholder="Opmerkingen..." style="height: 60px; font-size: 0.8em; margin-top: 10px;"></textarea>
                    </div>
                `;
                feed.appendChild(kaart);
            });
        } else {
            feed.innerHTML = '<p style="font-size: 0.9em; color: #666;">Nog geen aangiftes ingediend.</p>';
        }
    });

    function toggleFeedback(id) {
        const elem = document.getElementById('fb-' + id);
        elem.style.display = (elem.style.display === 'block') ? 'none' : 'block';
    }
</script>

</body>
</html>
